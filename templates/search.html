<!-- templates/search.html -->

{% extends "layout.html" %}

{% block title %}Form 990 Report{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>Form 990 Report</h2>
    
    <!-- Search Form -->
    <form id="search-form" class="mt-4">
        <div class="form-group">
            <label for="entity_name">Enter Non-Profit Name:</label>
            <input type="text" class="form-control" id="entity_name" name="entity_name" placeholder="Enter the name of the non-profit" required>
        </div>
        <button type="submit" class="btn btn-primary">Search</button>
    </form>
    
    <!-- Workflow Status and Button B -->
    <div id="workflow-status" class="mt-4">
        <span id="status-indicator" style="display:none; color:green; font-size: 1.2em;">
            &#x1F7E2; Workflow Complete
        </span>
        <button id="extract-info-btn" class="btn btn-success ml-3" disabled>Extract Key Information</button>
        <div id="json-feedback" class="mt-2" style="min-height: 20px;"></div>
    </div>
    
    <!-- Search Results Table -->
    <h3 class="mt-4">Search Results</h3>
    <table id="resultsTable" class="table table-striped">
        <thead>
            <tr>
                <th>Entity Name</th>
                <th>EIN</th>
                <th>Total Revenue</th>
                <th>Total Expenses</th>
                <th>Net Income</th>
                <th>Compensation (Top Employees)</th>
            </tr>
        </thead>
        <tbody>
            <!-- Results will be populated here by JavaScript -->
        </tbody>
    </table>
</div>
{% endblock %}

{% block scripts %}
    {{ super() }}
    <!-- Load jQuery first -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <!-- Load DataTables JS -->
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <!-- Link to search.js script -->
    <script src="{{ url_for('static', filename='js/search.js') }}"></script>
{% endblock %}
